## REST API Buy/Rent
Реализован описанный в ТЗ функционал:

* Есть список товаров, который виден как авторизованным, так и неавторизованным пользователям.

* Авторизованный пользователь может оформить заказ на покупку или аренду товара, а также 
продлить уже существующую аренду до 24 часов при наличии средств на балансе.

* Авторизованный пользователь может открыть список всех своих заказов (можно назвать это также историей заказов), а также просмотреть информацию
о каждом отдельно взятом.

Дополнительно:
* "Авто"документация L5Swagger.
* Рабочие тесты всех основных маршрутов.
* На GET страницы со списками (/api/orders, /api/products) настроено кэширование.
* Есть таблица и сущность Transactions, куда сохраняется информация о пополнениях/списаниях и их причины.
* Регистрация/авторизация/выход.
* Пользователь может просмотреть только свои заказы (/api/orders).

## Стек

- **PHP 8.2**
- **Laravel 10.48.29**
- **MySQL 9.3.0**
- **Redis 7.2**
- **Nginx 1.27.5**
- **Docker**

Упаковано в Docker.
http://localhost:8000

По умолчанию стоят порты: 
- App 8000
- MySQL 3306
- Redis 6379
- MySQL Test 3307
- Redis Test 6380

Запуск:
```shell
docker compose up -d
```

Предварительно нужен файл .env. Можно продублировать .example.

Документацию (Swagger) можно посмотреть по url:
```shell
/api/docs
```

Для закрытия просроченных заказов используется комманда :
```shell
php artisan orders:close-expired
```

Запуск тестов:
```shell
php artisan config:clear
php artisan test --env=testing
```

## Дополнительно использовано:
- PHP CS Fixer
- L5Swagger
- Predis Client

Покупки(/заказы) с истёкшим сроком аренды закрываются задачей в CRON каждую минуту.

### Расширение функциональности (что сюда можно добавить):
- Добавление системы разграничения прав по ролям (с использованием Spatie Permissions);
- Внедрение сервиса для отслеживания ошибок (Sentry Logger?);
- Рассылка уведомления о заказах;
- Добавление CRUD для товаров, пользователей;
- Отправка уведомлений при регистрации;
- Функционал сброса пароля.
